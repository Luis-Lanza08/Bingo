<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bingo Web App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #2c3e50;
    }

    #config-preview {
      font-size: 0.95em;
      color: #555;
      text-align: center;
      margin-bottom: 15px;
    }

    .btn {
      padding: 10px 20px;
      background-color: #3498db;
      color: white;
      border: none;
      cursor: pointer;
      margin: 5px;
      border-radius: 5px;
      font-weight: bold;
    }

    .btn:hover {
      background-color: #2980b9;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #7f8c8d;
      padding: 8px;
      text-align: center;
    }

    th {
      background-color: #2c3e50;
      color: #fff;
    }

    .highlight {
      background-color: #f1c40f !important;
    }

    .ganador {
      background-color: #2ecc71 !important;
      color: white;
    }

    #numero-generado {
      display: inline-block;
      font-size: 2em;
      font-weight: bold;
      color: #2980b9;
      background-color: #ecf0f1;
      border: 3px solid #2980b9;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      line-height: 60px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }

    #ganador {
      font-size: 1em;
      font-weight: bold;
      color: white;
      background-color: #2ecc71;
      padding: 10px;
      border-radius: 5px;
      margin: 15px auto;
      max-width: 100%;
      display: flex;
      flex-wrap: nowrap;
      gap: 10px;
      justify-content: center;
      overflow-x: auto;
    }

    #ganador.animado {
      animation: ganadorFade 0.5s ease-in-out;
    }

    #ganador p {
      margin: 0;
      background: #27ae60;
      color: #fff;
      padding: 5px 15px;
      border-radius: 25px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      white-space: nowrap;
      animation: bounceIn 0.5s ease-in-out;
    }

    @keyframes bounceIn {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes ganadorFade {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    .bola {
      display: inline-block;
      background-color: #ecf0f1;
      color: #2c3e50;
      border: 2px solid #2980b9;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      line-height: 36px;
      text-align: center;
      font-weight: bold;
      margin: 2px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      font-size: 14px;
    }

    #numeros-generados {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 4px;
    }

    .sidebar-config {
      position: fixed;
      top: 0;
      left: 0;
      width: 280px;
      height: 100%;
      background-color: #ffffff;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      padding: 20px;
      overflow-y: auto;
      transform: translateX(-100%);
      transition: transform 0.3s ease-in-out;
      z-index: 1000;
    }

    .sidebar-config.open {
      transform: translateX(0);
    }

    .sidebar-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1100;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: bold;
    }

    .configuracion-content {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .configuracion-content label {
      display: flex;
      flex-direction: column;
      font-size: 14px;
      gap: 4px;
    }

    .configuracion-content input {
      padding-left: 8px;
      background-color: #fff;
      border: 1px solid #bdc3c7;
      border-radius: 6px;
      height: 30px;
      font-size: 14px;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    }
	.sidebar-toggle.hide {
	  display: none;
	}

  </style>
</head>
<body>
  <button class="sidebar-toggle" onclick="toggleMenu()">‚öôÔ∏è Configuraci√≥n</button>

  <div class="sidebar-config" id="menuConfig">
    <h2>‚öôÔ∏è Configuraci√≥n</h2>
    <div class="configuracion-content">
      <label>üé´ Precio del cart√≥n (Bs.):
        <input type="number" id="precio" value="10" onchange="actualizarResumen()" />
      </label>
      <label>üèÜ M√°x. Ganadores:
        <input type="number" id="max-ganadores" value="3" min="1" onchange="generarCamposPremios(); actualizarResumen()" />
      </label>
      <label>üéÅ Premio #1:
        <input type="text" id="premio0" value="10 Bs" onchange="actualizarResumen()" />
      </label>
      <label>üéÅ Premio #2:
        <input type="text" id="premio1" value="20 Bs" onchange="actualizarResumen()" />
      </label>
      <label>üéÅ Premio #3:
        <input type="text" id="premio2" value="30 Bs" onchange="actualizarResumen()" />
      </label>
    </div>
  </div>

  <h1>Bingo Web App</h1>

  <div style="text-align: center;">
    <button class="btn" onclick="generarNumero()">Generar N√∫mero</button>
    <button class="btn" onclick="reiniciarJuego()">Reiniciar Juego</button>
  </div>

  <p style="text-align: center;">N√∫mero Generado: <span id="numero-generado">-</span></p>
  <div id="ganador"></div>

  <div id="config-preview">üé´ Cart√≥n: 10 Bs ¬∑ üèÜ M√°x. ganadores: 3 ¬∑ üéÅ Premios: 10 Bs, 20 Bs, 30 Bs</div>

  <table>
    <thead>
      <tr>
        <th>N¬∞</th><th>Nombre</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th>
      </tr>
    </thead>
    <tbody id="cuerpo-tabla"></tbody>
  </table>

  <h2>N√∫meros Generados</h2>
  <div id="numeros-generados">Ninguno a√∫n.</div>

<script>
  const TOTAL_FILAS = 10;
  const TOTAL_COLUMNAS = 5;
  const numerosGenerados = new Set();
  let ganadoresRegistrados = [];
  let bolsaNumeros = [];

  function toggleMenu() {
    const menu = document.getElementById('menuConfig');
    const boton = document.querySelector('.sidebar-toggle');
    menu.classList.toggle('open');
    boton.classList.toggle('hide');
  }

  function generarTabla() {
    const cuerpo = document.getElementById('cuerpo-tabla');
    cuerpo.innerHTML = '';
    for (let i = 0; i < TOTAL_FILAS; i++) {
      const fila = document.createElement('tr');
      fila.innerHTML = `<td>${i + 1}</td><td contenteditable="true"></td>`;
      for (let j = 0; j < TOTAL_COLUMNAS; j++) {
        const valor = i + 1 + j * TOTAL_FILAS;
        fila.innerHTML += `<td class="celda" data-num="${valor}">${valor}</td>`;
      }
      cuerpo.appendChild(fila);
    }
  }

  function fisherYatesShuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  function inicializarBolsa() {
    bolsaNumeros = Array.from({ length: 50 }, (_, i) => i + 1);
    fisherYatesShuffle(bolsaNumeros);
  }

  function generarCamposPremios() {
    const contenedor = document.querySelector('.configuracion-content');
    const max = parseInt(document.getElementById("max-ganadores").value);
    contenedor.querySelectorAll('label').forEach((label, index) => {
      if (index > 1) label.remove();
    });
    for (let i = 0; i < max; i++) {
      if (!document.getElementById(`premio${i}`)) {
        const label = document.createElement('label');
        label.innerHTML = `üéÅ Premio #${i + 1}: <input type="text" id="premio${i}" value="${(i + 1) * 10} Bs" onchange="actualizarResumen()">`;
        contenedor.appendChild(label);
      }
    }
  }

  function generarNumero() {
    if (bolsaNumeros.length === 0) {
      alert("Ya se han generado todos los n√∫meros.");
      return;
    }

    let intentos = 0;
    let animacion = setInterval(() => {
      const random = Math.floor(Math.random() * 50) + 1;
      document.getElementById("numero-generado").textContent = random;
      intentos++;

      if (intentos >= 20) {
        clearInterval(animacion);

        const num = bolsaNumeros.shift();
        numerosGenerados.add(num);
        document.getElementById("numero-generado").textContent = num;

        const bolas = Array.from(numerosGenerados)
          .sort((a, b) => a - b)
          .map(n => `<span class="bola">${n}</span>`).join('');
        document.getElementById("numeros-generados").innerHTML = bolas;

        document.querySelectorAll('.celda').forEach(celda => {
          if (parseInt(celda.dataset.num) === num) {
            celda.classList.add('highlight');
          }
        });

        verificarGanador();
      }
    }, 100);
  }

  function verificarGanador() {
    const maxGanadores = parseInt(document.getElementById("max-ganadores").value);
    const filas = document.querySelectorAll('#cuerpo-tabla tr');
    const nuevosGanadores = [];

    filas.forEach((fila, index) => {
      const celdas = fila.querySelectorAll('.celda');
      const completadas = Array.from(celdas).every(celda => celda.classList.contains('highlight'));
      const yaGanador = ganadoresRegistrados.includes(index);
      if (completadas && !yaGanador && nuevosGanadores.length + ganadoresRegistrados.length < maxGanadores) {
        fila.classList.add('ganador');
        nuevosGanadores.push(index);
      }
    });

    if (nuevosGanadores.length > 0) {
      ganadoresRegistrados.push(...nuevosGanadores);
      const contenedorGanador = document.getElementById("ganador");
      contenedorGanador.innerHTML = ganadoresRegistrados.map((i, idx) => {
        const fila = document.querySelectorAll('#cuerpo-tabla tr')[i];
        const nombre = fila.children[1].textContent.trim() || `Fila ${i + 1}`;
        const premio = document.getElementById(`premio${idx}`)?.value || '---';
        return `<p>üéâ ¬°BINGO: ${nombre} ‚Äî Premio: ${premio}! üéâ</p>`;
      }).join('');
      contenedorGanador.classList.remove('animado');
      void contenedorGanador.offsetWidth;
      contenedorGanador.classList.add('animado');
    }
  }

  function reiniciarJuego() {
    numerosGenerados.clear();
    ganadoresRegistrados = [];
    document.getElementById("numero-generado").textContent = "-";
    document.getElementById("numeros-generados").innerHTML = "Ninguno a√∫n.";
    document.getElementById("ganador").innerHTML = "";
    document.querySelectorAll('.celda').forEach(celda => celda.classList.remove('highlight'));
    document.querySelectorAll('tr').forEach(row => row.classList.remove('ganador'));
    inicializarBolsa();
    generarCamposPremios();
    actualizarResumen();
  }

  function actualizarResumen() {
    const precio = document.getElementById("precio").value;
    const ganadores = document.getElementById("max-ganadores").value;
    const premios = [];
    for (let i = 0; i < ganadores; i++) {
      const p = document.getElementById(`premio${i}`);
      if (p) premios.push(p.value);
    }
    document.getElementById("config-preview").textContent =
      `üé´ Cart√≥n: ${precio} Bs ¬∑ üèÜ M√°x. ganadores: ${ganadores} ¬∑ üéÅ Premios: ${premios.join(', ')}`;
  }

  window.onload = () => {
    generarTabla();
    generarCamposPremios();
    inicializarBolsa();
    actualizarResumen();
  }

  document.addEventListener('click', function (e) {
    const menu = document.getElementById('menuConfig');
    const boton = document.querySelector('.sidebar-toggle');
    const clickDentroDeMenu = menu.contains(e.target);
    const clickEnBoton = boton.contains(e.target);

    if (!clickDentroDeMenu && !clickEnBoton && menu.classList.contains('open')) {
      menu.classList.remove('open');
      boton.classList.remove('hide');
    }
  });
</script>

</body>
</html>
